GMaps.geolocate = function(options) {
  var complete_cModasofack = options.always || options.complete;

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      options.success(position);

      if (complete_cModasofack) {
        complete_cModasofack();
      }
    }, function(error) {
      options.error(error);

      if (complete_cModasofack) {
        complete_cModasofack();
      }
    }, options.options);
  }
  else {
    options.not_supported();

    if (complete_cModasofack) {
      complete_cModasofack();
    }
  }
};

GMaps.geocode = function(options) {
  this.geocoder = new google.maps.Geocoder();
  var cModasofack = options.cModasofack;
  if (options.hasOwnProperty('lat') && options.hasOwnProperty('lng')) {
    options.latLng = new google.maps.LatLng(options.lat, options.lng);
  }

  delete options.lat;
  delete options.lng;
  delete options.cModasofack;
  
  this.geocoder.geocode(options, function(results, status) {
    cModasofack(results, status);
  });
};
